@page "/"
@namespace Gagger.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
}

<script>

    function makeBold(id) {
        // Get the textarea element by its id
        var element = "custom-textarea" + id;

        var textarea = document.getElementById(element);
        // Get the selected text
       var selectedText = textarea.value.substring(textarea.selectionStart, textarea.selectionEnd);
        // Add '%' signs before and after the selected text
        var newText = '<b>' + selectedText + '</b>';
        // Update the textarea with the modified text
       textarea.value = textarea.value.substring(0, textarea.selectionStart) + newText + textarea.value.substring(textarea.selectionEnd);    
       // Update the cursor position
       textarea.selectionStart = textarea.selectionEnd = textarea.selectionStart + newText.length;   
       // Trigger the input event to update the binding (if you're using a framework like Blazor)
       textarea.dispatchEvent(new Event('input'));
    }

    function captureImage2() {
        var canvas = document.createElement('canvas');
        var img = document.getElementById('capturedImage2');
        canvas.width = img.width;
        canvas.height = img.height;
        var ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, img.width, img.height);
        return canvas.toDataURL('image/png');
    }


    window.previewImage2 = (inputElem, imgElem) => {
        const url = URL.createObjectURL(inputElem.files[0]);
        imgElem.addEventListener('load', () => URL.revokeObjectURL(url), { once: true });
        imgElem.src = url;
    }


    function captureImage1() {
        var canvas = document.createElement('canvas');
        var img = document.getElementById('capturedImage1');
        canvas.width = img.width;
        canvas.height = img.height;
        var ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, img.width, img.height);
        return canvas.toDataURL('image/png');
    }


    window.previewImage1 = (inputElem, imgElem) => {
        const url = URL.createObjectURL(inputElem.files[0]);
        imgElem.addEventListener('load', () => URL.revokeObjectURL(url), { once: true });
        imgElem.src = url;
    }

    function captureImage3() {
        var canvas = document.createElement('canvas');
        var img = document.getElementById('capturedImage3');
        canvas.width = img.width;
        canvas.height = img.height;
        var ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, img.width, img.height);
        return canvas.toDataURL('image/png');
    }


    window.previewImage3 = (inputElem, imgElem) => {
        const url = URL.createObjectURL(inputElem.files[0]);
        imgElem.addEventListener('load', () => URL.revokeObjectURL(url), { once: true });
        imgElem.src = url;
    }


    function captureImage() {
        var canvas = document.createElement('canvas');
        var img = document.getElementById('capturedImage');
        canvas.width = img.width;
        canvas.height = img.height;
        var ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, img.width, img.height);
        return canvas.toDataURL('image/png');
    }


    window.previewImage = (inputElem, imgElem) => {
        const url = URL.createObjectURL(inputElem.files[0]);
        imgElem.addEventListener('load', () => URL.revokeObjectURL(url), { once: true });
        imgElem.src = url;
    }


    window.isScrollAtBottom = function (container) {
        console.log("scrollheight: " + container.scrollHeight  +"   clientHeight: " + container.clientHeight + "    container.scrollTop: " + container.scrollTop)
        //console.log("RESULT: " + (container.scrollHeight - container.scrollTop))
        if( container.scrollHeight - container.scrollTop <= container.clientHeight){
            //console.log("TRUE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
            return true;
        }
        else return false;
    };

    var scrollYPosition = 0;

    function storeScrollPosition() {
        scrollYPosition = window.scrollY;
    }

    window.addEventListener("popstate", function (event) {
        // Restore the scroll position when navigating back
        window.scrollTo(0, scrollYPosition);
    });


    const otherRadio = document.getElementById("other");
    const otherSelect = document.getElementById("selectothergender");

    otherRadio.addEventListener("change", function () {
        alert("asd")
        if (this.checked) {
            otherSelect.disabled = false;
        } else {
            otherSelect.disabled = true;
        }
    });

    // for spoiler button
    function HandleCheckboxChange() {
        var checkbox = document.querySelector('input[type="checkbox"]');
        var hideMeElements = document.querySelectorAll('.thehider');

        for (var i = 0; i < hideMeElements.length; i++) {
            if (checkbox.checked) {
                hideMeElements[i].style.display = 'none'; // Hide spoilers
            } else {
                hideMeElements[i].style.display = ''; // Show spoilers
            }
        }
    }


    function reloadPage() {
        location.reload();
    }

</script>





<component type="typeof(App)" render-mode="ServerPrerendered" />
